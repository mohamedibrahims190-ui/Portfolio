<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Portfolio</title>
    <script type="importmap"></script>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Portfolio.styles.css" asp-append-version="true" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark custom-navbar py-3">
            <div class="container-fluid">
                <a class="navbar-brand fw-bold" asp-area="" asp-controller="Home" asp-action="Index">Portfolio</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2025 - Portfolio - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script>
        const nameText = "\u00A0Mohamed Ibrahim"; // Leading space
        const titles = [
            "Software Developer (.NET)",
            "Backend Developer (.NET)"
        ];

        let nameIndex = 0;
        let titleIndex = 0;
        let roleIndex = 0;

        const typingSpeed = 70;
        const erasingSpeed = 50;
        const delayAfterTyping = 1500;

        function typeName() {
            if (nameIndex < nameText.length) {
                document.getElementById("name").innerHTML += nameText.charAt(nameIndex);
                nameIndex++;
                setTimeout(typeName, typingSpeed);
            } else {
                setTimeout(typeTitle, 500); // start title after name
            }
        }

        function typeTitle() {
            const currentTitle = titles[roleIndex];

            if (titleIndex < currentTitle.length) {
                document.getElementById("title").innerHTML += currentTitle.charAt(titleIndex);
                titleIndex++;
                setTimeout(typeTitle, typingSpeed);
            } else {
                setTimeout(eraseTitle, delayAfterTyping);
            }
        }

        function eraseTitle() {
            if (titleIndex > 0) {
                const currentText = titles[roleIndex].substring(0, titleIndex - 1);
                document.getElementById("title").innerHTML = currentText;
                titleIndex--;
                setTimeout(eraseTitle, erasingSpeed);
            } else {
                roleIndex = (roleIndex + 1) % titles.length;
                setTimeout(typeTitle, typingSpeed);
            }
        }

        const connectBtn = document.getElementById("connectBtn");
        const connectCard = document.getElementById("connectCard");
        const closeCard = document.getElementById("closeCard");
        const overlay = document.getElementById("overlay");

        // Show card with overlay
        connectBtn.addEventListener("click", () => {
            overlay.style.display = "block";
            overlay.style.opacity = 0;
            connectCard.style.display = "block";
            connectCard.style.opacity = 0;

            setTimeout(() => {
                overlay.style.opacity = 1;
                connectCard.style.opacity = 1;
            }, 10);
        });

        // Close card and overlay
        closeCard.addEventListener("click", () => {
            overlay.style.opacity = 0;
            connectCard.style.opacity = 0;
            setTimeout(() => {
                overlay.style.display = "none";
                connectCard.style.display = "none";
            }, 300);
        });

        // Close card if clicked outside
        overlay.addEventListener("click", () => {
            closeCard.click();
        });

            function copyEmail() {
            const email = document.getElementById("emailText").innerText;
            const icon = document.getElementById("copyIcon");

            navigator.clipboard.writeText(email).then(() => {
                // Change icon to tick
                icon.classList.remove("bi-copy");
                icon.classList.add("bi-check-circle-fill");

                // Optional: revert back after 2 seconds
                setTimeout(() => {
                    icon.classList.remove("bi-check-circle-fill");
                    icon.classList.add("bi-copy");
                }, 2000);
            });
        }

        document.addEventListener("DOMContentLoaded", typeName);
    </script>


    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
